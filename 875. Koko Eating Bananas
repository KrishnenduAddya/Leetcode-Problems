// Airbnb Facebook Google Flipkart Paytm PhonePe

// Binary Search on Answer

public class Solution {
    public int MinEatingSpeed(int[] piles, int h) {
        // Minimum possible eating speed is 1 banana/hour
        int low = 1;

        // Maximum possible eating speed is the largest pile
        int high = piles.Max();

        int minSpeed = high;
        while(low <= high)
        {
            int mid = low + (high - low) / 2;

            // Check if Koko can finish all bananas at speed = mid
            if(CanEat(piles, h, mid))
            {
                minSpeed = mid; // Update answer with feasible speed
                high = mid - 1; // Try smaller speed (search left)
            }
            else
                low = mid + 1;  // Speed too slow, search right
        }
        return minSpeed;
    }

    private bool CanEat(int[] piles, int h, int mid)
    {
        long countHour = 0;
        foreach(int pile in piles)
        {  
            // Hours needed for this pile = ceil(pile / speed)
            // Implemented as integer division + remainder check

            countHour = countHour + pile / mid + (pile % mid != 0 ? 1 : 0);
            
            // countHour = countHour + pile / mid;
            // if(pile % mid != 0)
            //     countHour++;
        }
        
        // Return true if total hours is within allowed h
        return countHour <= h;
    }
}
