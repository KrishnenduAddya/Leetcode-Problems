// Accolite Amazon D-E-Shaw Intuit Morgan Stanley Opera Microsoft Flipkart Facebook

// Prefix Sum

// Basic Approach
// --------------

public class Solution {
    public int[] ProductExceptSelf(int[] nums) {
        int n = nums.Length;

        int [] leftProduct = new int[n];
        int [] rightProduct = new int[n];
        int [] product = new int[n];

        // Step 1 : Populate left product array
        leftProduct[0] = 1;
        for(int i = 1; i < n; i++)
            leftProduct[i] = leftProduct[i - 1] * nums[i - 1];

        // Step 2 : Populate right product array
        rightProduct[n - 1] = 1;
        for(int i = n - 2; i >= 0; i--)
            rightProduct[i] = nums[i + 1] * rightProduct[i + 1];

        // Step 3: Populate the final product array
        for(int i = 0; i < n; i++)
            product[i] = leftProduct[i] * rightProduct[i];
        
        return product;
    }
}

// Optimized Approach
// ------------------

public class Solution {
    public int[] ProductExceptSelf(int[] nums) {
        int n = nums.Length;
        int [] product = new int[n];

        // Step 1 : Compute left products
        int p = 1;
        for(int i = 0; i < n; i++)
        {
            product[i] = p;
            p = p * nums[i];
        }
            
        // Step 2 : Compute left * right products which yeilds the final product array
        p = 1;
        for(int i = n - 1; i >= 0; i--)
        {
            product[i] = product[i] * p;
            p = p * nums[i];
        }
        
        return product;
    }
}
